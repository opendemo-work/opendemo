# 集合操作

<cite>
**本文档中引用的文件**   
- [set_basics.py](file://opendemo_output/python/set-operations/code/set_basics.py)
- [example1.py](file://opendemo_output/python/libraries/numpy/set-operations/code/example1.py)
- [example2.py](file://opendemo_output/python/libraries/numpy/set-operations/code/example2.py)
- [metadata.json](file://opendemo_output/python/set-operations/metadata.json)
- [metadata.json](file://opendemo_output/python/libraries/numpy/set-operations/metadata.json)
</cite>

## 目录
1. [简介](#简介)
2. [集合创建](#集合创建)
3. [基本操作](#基本操作)
4. [集合运算](#集合运算)
5. [实际应用](#实际应用)
6. [不可变集合](#不可变集合)

## 简介

集合（Set）是Python中一种重要的数据结构，它是一个无序且不重复的元素集合。集合在数据处理中非常有用，特别是在需要去重、执行数学集合运算（如并集、交集、差集等）时。本文档将详细介绍Python中集合的创建、操作、运算以及实际应用场景。

**Section sources**
- [metadata.json](file://opendemo_output/python/set-operations/metadata.json#L1-L11)

## 集合创建

集合可以通过多种方式创建。最常见的方式是使用花括号 `{}` 或 `set()` 构造函数。需要注意的是，空集合必须使用 `set()` 创建，因为 `{}` 表示空字典。

```python
# 直接创建
set1 = {1, 2, 3, 4, 5}

# 使用set()构造函数从列表创建（自动去重）
set2 = set([1, 2, 2, 3, 3, 3])

# 从字符串创建
set3 = set("hello")

# 集合推导式
set4 = {x**2 for x in range(1, 6)}

# 创建空集合
set5 = set()
```

**Section sources**
- [set_basics.py](file://opendemo_output/python/set-operations/code/set_basics.py#L8-L33)

## 基本操作

集合支持多种基本操作，包括添加、删除、检查成员和获取长度等。

```python
s = {1, 2, 3}

# 添加元素
s.add(4)

# 添加多个元素
s.update([5, 6, 7])

# 删除元素（不存在会报错）
s.remove(7)

# 删除元素（不存在不会报错）
s.discard(10)

# 随机删除一个元素
popped = s.pop()

# 检查成员
print(3 in s)

# 获取长度
print(len(s))
```

**Section sources**
- [set_basics.py](file://opendemo_output/python/set-operations/code/set_basics.py#L35-L68)

## 集合运算

集合支持多种数学运算，包括并集、交集、差集和对称差集。

```python
A = {1, 2, 3, 4, 5}
B = {4, 5, 6, 7, 8}

# 并集
union = A | B  # 或 A.union(B)

# 交集
intersection = A & B  # 或 A.intersection(B)

# 差集
difference = A - B  # 或 A.difference(B)

# 对称差集
symmetric_diff = A ^ B  # 或 A.symmetric_difference(B)
```

**Section sources**
- [example1.py](file://opendemo_output/python/libraries/numpy/set-operations/code/example1.py#L1-L34)
- [set_basics.py](file://opendemo_output/python/set-operations/code/set_basics.py#L70-L97)

## 实际应用

集合在实际编程中有广泛的应用，例如用户兴趣匹配、数据去重等。

```python
# 用户兴趣标签
alice_interests = {"阅读", "电影", "音乐", "旅行"}
bob_interests = {"旅行", "电影", "运动", "游戏"}

# 计算共同兴趣（交集）
common_interests = alice_interests & bob_interests

# 为Alice推荐Bob有兴趣但她没有的活动（差集）
recommendations = bob_interests - alice_interests

# 计算两人总兴趣范围（并集）
all_interests = alice_interests | bob_interests
```

**Section sources**
- [example2.py](file://opendemo_output/python/libraries/numpy/set-operations/code/example2.py#L1-L25)

## 不可变集合

`frozenset` 是集合的不可变版本，可以作为字典的键或集合的元素。

```python
# 创建frozenset
fs = frozenset([1, 2, 3, 4, 5])

# frozenset可以作为字典的键
data = {frozenset([1, 2]): "one-two", frozenset([3, 4]): "three-four"}

# frozenset支持集合运算
fs1 = frozenset([1, 2, 3])
fs2 = frozenset([2, 3, 4])
union = fs1 | fs2
intersection = fs1 & fs2
```

**Section sources**
- [set_basics.py](file://opendemo_output/python/set-operations/code/set_basics.py#L131-L155)